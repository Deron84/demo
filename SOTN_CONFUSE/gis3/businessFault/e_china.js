(function(a){a.fn.ChinaModule=function(c,d){var b=a("body").GeoUtils("getHeight");a("#g_map").css("height",b);if(typeof c=="string"){return a.fn.ChinaModule.methods[c](d)}a.fn.ChinaModule.methods.init()};a.fn.ChinaModule.methods={init:function(){var b=echarts.init(document.getElementById("g_map"));b.setOption({geo:a("body").GeoUtils("getChinaMapInstance"),series:[{type:"map",map:"china",silent:true,itemStyle:{borderColor:"#A1BBEC",borderWidth:1,areaColor:"#F9FBFF"},emphasis:{itemStyle:{areaColor:"#F9FBFF"}},data:a("body").GeoUtils("getChinaRegions")}]});a.fn.ChinaModule.methods.renderData(b);a.fn.ChinaModule.methods.chartEventsTrigger(b);window.onresize=function(){var c=a("body").GeoUtils("getHeight");a("#g_map").css("height",c);a("body").GeoUtils("getResize",b)}},renderData:function(d){var c=a("body").GeoUtils("getEffectScatters");var b=a("body").GeoUtils("getLines");a.get("../../geodata/servicelines.json",function(e){if(e&&e.nodes){var h=[];e.nodes.map(function(j,k){var i={name:j.oname,value:[j.longitude,j.lantitude].concat(30),data:j};h.push(i)});var f=[];e.edges.map(function(j,k){var i={oname:j.oname,coords:[[j.a_longitude,j.a_lantitude],[j.z_longitude,j.z_lantitude]],data:j};f.push(i)});c.data=h;b.data=f;var g=d.getOption();g.series.push(c);g.series.push(b);d.setOption(g);a.fn.ChinaModule.methods.renderWarningData(d);a.fn.ChinaModule.methods.realRenderWarningData(d)}})},renderWarningData:function(b){a.get("../../geodata/queryWarnings.json",function(c){if(c&&c.serviceline){c.serviceline.map(function(f,e){var d=b.getOption();d.series.map(function(g,h){if(g.type=="lines"){g.data.map(function(j,k){var i=false;j.data.aggr.map(function(l,m){if(l.oid==f){i=true}});if(i){j.lineStyle={color:Global.mapGlobal.echartsConfig.lineColor.fault}}})}});console.error("warnningoptions",d);b.setOption(d)})}})},realRenderWarningData:function(b){if(Global.mapGlobal.queryPOI.realQueryFlag){setInterval(function(){a.fn.ChinaModule.methods.renderWarningData(b)},Global.mapGlobal.queryPOI.realQueryTimer)}},chartEventsTrigger:function(b){b.on("click",function(e){var f=b.getOption();var c=[];c.push(e.data);if(e.seriesType&&e.seriesType=="lines"){var d=b.getOption();d.series.push({name:"lights_line",type:"lines",zlevel:1,lineStyle:{normal:{color:Global.mapGlobal.echartsConfig.lineColor.light,width:Global.mapGlobal.echartsConfig.lineWidth,curveness:Global.mapGlobal.echartsConfig.lineCurveness}},effect:{show:true,period:6,trailLength:0.7,color:"red",symbolSize:3},data:c});b.setOption(d)}else{b.setOption(f)}})}}})(jQuery);